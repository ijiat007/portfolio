!function(t,a){"function"==typeof define&&define.amd?define(["jquery"],function(n){return a(t,n)}):"object"==typeof exports?a(t,require("jquery")):a(t,t.jQuery||t.Zepto)}(this,function(t,a){"use strict";var n,o,i="remodal",e=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||i,s=a.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+e}).join(" "),r=a.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+e}).join(" "),d=a.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),c={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},l={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},m=void 0!==(n=document.createElement("div").style).animationName||void 0!==n.WebkitAnimationName||void 0!==n.MozAnimationName||void 0!==n.msAnimationName||void 0!==n.OAnimationName,p=/iPad|iPhone|iPod/.test(navigator.platform);function u(t){if(m&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var a,n,o,i,e=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(e=e.split(", "),s=s.split(", "),r=r.split(", "),i=0,n=e.length,a=Number.NEGATIVE_INFINITY;i<n;i++)(o=parseFloat(e[i])*parseInt(r[i],10)+parseFloat(s[i]))>a&&(a=o);return a}function f(){if(!p){var t=a("html"),n=C("is-locked");t.hasClass(n)&&(a(document.body),t.removeClass(n))}}function h(t,a,n,o){var i=C("is",a),e=[C("is",c.CLOSING),C("is",c.OPENING),C("is",c.CLOSED),C("is",c.OPENED)].join(" ");t.$bg.removeClass(e).addClass(i),t.$overlay.removeClass(e).addClass(i),t.$wrapper.removeClass(e).addClass(i),t.$modal.removeClass(e).addClass(i),t.state=a,!n&&t.$modal.trigger({type:a,reason:o},[{reason:o}])}function g(t,n,o){var i=0,e=function(t){t.target===this&&i++},d=function(t){t.target===this&&0==--i&&(a.each(["$bg","$overlay","$wrapper","$modal"],function(t,a){o[a].off(s+" "+r)}),n())};a.each(["$bg","$overlay","$wrapper","$modal"],function(t,a){o[a].on(s,e).on(r,d)}),t(),0===u(o.$bg)&&0===u(o.$overlay)&&0===u(o.$wrapper)&&0===u(o.$modal)&&(a.each(["$bg","$overlay","$wrapper","$modal"],function(t,a){o[a].off(s+" "+r)}),n())}function v(t){t.state!==c.CLOSED&&(a.each(["$bg","$overlay","$wrapper","$modal"],function(a,n){t[n].off(s+" "+r)}),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),f(),h(t,c.CLOSED,!0))}function C(){for(var t=e,a=0;a<arguments.length;++a)t+="-"+arguments[a];return t}function O(){var t,n,e=location.hash.replace("#","");if(e){try{n=a("[data-"+i+'-id="'+e+'"]')}catch(t){}n&&n.length&&(t=a[i].lookup[n.data(i)])&&t.settings.hashTracking&&t.open()}else o&&o.state===c.OPENED&&o.settings.hashTracking&&o.close()}function $(t,n){a(document.body);var o=a("#content"),s=this;s.settings=a.extend({},d,n),s.index=a[i].lookup.push(s)-1,s.state=c.CLOSED,s.$overlay=a("."+C("overlay")),null!==s.settings.appendTo&&s.settings.appendTo.length&&(o=a(s.settings.appendTo)),s.$overlay.length||(s.$overlay=a("<div>").addClass(C("overlay")+" "+C("is",c.CLOSED)).hide(),o.append(s.$overlay)),s.$bg=a("."+C("bg")).addClass(C("is",c.CLOSED)),s.$modal=t.addClass(e+" "+C("is-initialized")+" "+s.settings.modifier+" "+C("is",c.CLOSED)).attr("tabindex","-1"),s.$wrapper=a("<div>").addClass(C("wrapper")+" "+s.settings.modifier+" "+C("is",c.CLOSED)).hide().append(s.$modal),o.append(s.$wrapper),s.$wrapper.on("click."+e,"[data-"+i+'-action="close"]',function(t){t.preventDefault(),s.close(),o.attr("tabindex","")}),s.$wrapper.on("click."+e,"[data-"+i+'-action="cancel"]',function(t){t.preventDefault(),s.$modal.trigger(l.CANCELLATION),s.settings.closeOnCancel&&s.close(l.CANCELLATION)}),s.$wrapper.on("click."+e,"[data-"+i+'-action="confirm"]',function(t){t.preventDefault(),s.$modal.trigger(l.CONFIRMATION),s.settings.closeOnConfirm&&s.close(l.CONFIRMATION)}),s.$wrapper.on("click."+e,function(t){a(t.target).hasClass(C("wrapper"))&&s.settings.closeOnOutsideClick&&s.close()})}$.prototype.open=function(){var t,n=this;if(n.state!==c.OPENING&&n.state!==c.CLOSING){(t=n.$modal.attr("data-"+i+"-id"))&&n.settings.hashTracking&&(location.hash=t),o&&o!==n&&v(o),a("#content").attr("aria-hidden","ture"),o=n,function(){if(!p){var t=a("html"),n=C("is-locked");t.hasClass(n)||(a(document.body),t.addClass(n))}}(),n.$bg.addClass(n.settings.modifier),n.$overlay.addClass(n.settings.modifier).show(),n.$wrapper.show().scrollTop(0),n.$modal.focus();var e=n.$modal.height(),s=a(window).height(),r=s-160;s<=e?(n.$modal.find(".cont").css({height:r,overflow:"auto","overflow-x":"hidden"}),n.$modal.css("margin-top","50px")):(n.$modal.find(".cont").css({height:"auto",overflow:"visible"}),n.$modal.css("margin-top","0")),a(window).resize(function(){var t=n.$modal.height(),o=a(window).height(),i=o-160;o<=t?(n.$modal.find(".cont").css({height:i+"px",overflow:"auto","overflow-x":"hidden"}),n.$modal.css("margin-top","50px")):(n.$modal.find(".cont").css({height:"auto",overflow:"visible"}),n.$modal.css("margin-top","0"))}),g(function(){h(n,c.OPENING)},function(){h(n,c.OPENED)},n)}},$.prototype.close=function(t){var n=this;n.state!==c.OPENING&&n.state!==c.CLOSING&&n.state!==c.CLOSED&&(n.settings.hashTracking&&n.$modal.attr("data-"+i+"-id")===location.hash.substr(1)&&(location.hash=""),a("#content").attr("aria-hidden","false"),g(function(){h(n,c.CLOSING,!1,t)},function(){n.$bg.removeClass(n.settings.modifier),n.$overlay.removeClass(n.settings.modifier).hide(),n.$wrapper.hide(),f(),h(n,c.CLOSED,!1,t);var o="#"+n.$modal.attr("data-"+i+"-id");a(o).focus()},n))},$.prototype.getState=function(){return this.state},$.prototype.destroy=function(){var t=a[i].lookup;v(this),this.$wrapper.remove(),delete t[this.index],0===a.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(C("is",c.CLOSING)+" "+C("is",c.OPENING)+" "+C("is",c.CLOSED)+" "+C("is",c.OPENED)))},a[i]={lookup:[]},a.fn[i]=function(t){var n,o;return this.each(function(e,s){null==(o=a(s)).data(i)?(n=new $(o,t),o.data(i,n.index),n.settings.hashTracking&&o.attr("data-"+i+"-id")===location.hash.substr(1)&&n.open()):n=a[i].lookup[o.data(i)]}),n},a(document).ready(function(){a(document).on("click","[data-"+i+"-target]",function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-"+i+"-target"),o=a("[data-"+i+'-id="'+n+'"]');a[i].lookup[o.data(i)].open(),a(this).attr("id",n),a("button").not(a(this)).attr("id","")}),a(document).find("."+e).each(function(t,n){var o=a(n),e=o.data(i+"-options");e?("string"==typeof e||e instanceof String)&&(e=function(t){var a,n,o,i,e={};for(i=0,n=(a=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<n;i++)a[i]=a[i].split(":"),("string"==typeof(o=a[i][1])||o instanceof String)&&(o="true"===o||"false"!==o&&o),("string"==typeof o||o instanceof String)&&(o=isNaN(o)?o:+o),e[a[i][0]]=o;return e}(e)):e={},o[i](e)}),a(document).on("keydown."+e,function(t){o&&o.settings.closeOnEscape&&o.state===c.OPENED&&27===t.keyCode&&o.close()}),a(window).on("hashchange."+e,O)})});